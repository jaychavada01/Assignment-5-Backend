# ğŸš€ ASSIGNMENT-5 BACKEND WORK

## ğŸ“Œ Project Overview

This project is a backend application built with **Node.js**, **Express.js**, and **Sequelize** (ORM for PostgreSQL). It includes user authentication, JWT-based authorization, a referral and rewards system, activity tracking, achievements, and AWS integrations for S3 file storage and SQS messaging.

---

## ğŸ“‚ Project Structure

```
Assignment/
â”œâ”€ .gitignore
â”œâ”€ api/
â”‚  â”œâ”€ .env
â”‚  â”œâ”€ app.js
â”‚  â”œâ”€ config/
â”‚  â”‚  â”œâ”€ aws.js
â”‚  â”‚  â”œâ”€ constant.js
â”‚  â”‚  â”œâ”€ database.js
â”‚  â”‚  â”œâ”€ firebase.js
â”‚  â”‚  â””â”€ serviceAccountKey.json
â”‚  â”œâ”€ controller/
â”‚  â”‚  â”œâ”€ authController.js
â”‚  â”‚  â””â”€ awsController.js
â”‚  â”œâ”€ helpers/
â”‚  â”‚  â””â”€ sqsworker.js
â”‚  â”œâ”€ middleware/
â”‚  â”‚  â”œâ”€ auth.js
â”‚  â”‚  â””â”€ upload.js
â”‚  â”œâ”€ models/
â”‚  â”‚  â”œâ”€ activity.js
â”‚  â”‚  â”œâ”€ notificationToken.js
â”‚  â”‚  â””â”€ user.js
â”‚  â”œâ”€ package-lock.json
â”‚  â”œâ”€ package.json
â”‚  â”œâ”€ routes/
â”‚  â”‚  â””â”€ userRoute.js
â”‚  â”œâ”€ uploads/
â”‚  â”‚  â”œâ”€ (image files)
â”‚  â””â”€ utils/
â”‚     â”œâ”€ activityCalculator.js
â”‚     â”œâ”€ mailer.js
â”‚     â”œâ”€ notification.js
â”‚     â”œâ”€ s3.js
â”‚     â””â”€ sqs.js
â””â”€ readme.MD
```

---

## âš™ï¸ Installation & Setup

### 1ï¸âƒ£ Clone the Repository

```sh
git clone https://github.com/jaychavada01/Assignment-5-Backend.git
cd api
```

### 2ï¸âƒ£ Install Dependencies

```sh
npm install
```

### 3ï¸âƒ£ Configure Environment Variables

Create a `.env` file in the `api/` directory and add the following values:

```
PORT=3000
DATABASE_URL=your_database_url
JWT_SECRET=your_jwt_secret
MAILTRAP_HOST=smtp.mailtrap.io
MAILTRAP_PORT=2525
MAILTRAP_USER=your_mailtrap_username
MAILTRAP_PASS=your_mailtrap_password
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=your_aws_region
S3_BUCKET_NAME=your_s3_bucket_name
SQS_QUEUE_URL=your_sqs_queue_url
```

---

## ğŸ› ï¸ Features

âœ… **User Authentication** (Signup/Login/Logout)  
âœ… **JWT-based Authorization**  
âœ… **Referral System** (Users refer others and earn rewards)  
âœ… **Daily Login Rewards** (Users earn 10 coins for logging in daily)  
âœ… **Profile Completion Rewards** (Users get 30 coins for 100% completion)  
âœ… **Activity Tracking** (Logs user activities like login, referrals, profile updates)  
âœ… **Achievements System** (Users unlock rewards based on activities)  
âœ… **Forgot Password & Reset Password** (Secure password recovery)  
âœ… **AWS S3 Integration** (File uploads & storage)  
âœ… **AWS SQS Integration** (Message queuing for notifications & tasks)  

---

## ğŸ”— API Endpoints

### **Authentication**

| Method | Endpoint                | Description                                                    | Auth Required |
| ------ | ----------------------- | -------------------------------------------------------------- | ------------- |
| POST   | `/users/signup`          | Register a new user if Applied referral code then reward users | âŒ No         |
| POST   | `/users/login`           | Log in and get JWT token & Track daily login and reward user   | âŒ No         |
| POST   | `/users/logout`          | Log out and clear token cookie                                 | âœ… Yes        |
| POST   | `/users/reset-password`  | Reset password (Authenticated)                                 | âœ… Yes        |
| POST   | `/users/forgot-password` | Send password reset email                                      | âŒ No         |

### **AWS Integrations**

| Method | Endpoint             | Description                                  | Auth Required |
| ------ | -------------------- | -------------------------------------------- | ------------- |
| POST   | `/upload`            | Upload files to AWS S3                       | âœ… Yes        |
| GET    | `/files/:filename`   | Get file from S3 bucket                      | âœ… Yes        |
| POST   | `/sqs/send`          | Send a message to AWS SQS queue              | âœ… Yes        |

---

## ğŸ† Achievements & Rewards

| Achievement          | Requirement                   | Reward |
| -------------------- | ----------------------------- | ------ |
| **Early Bird**       | Log in for 3 consecutive days | 10 pts |
| **Networker**        | Successfully refer 5 friends  | 50 pts |
| **Verified Profile** | Complete 100% of profile      | 30 pts |

---

## âœ¨ Technologies Used

- **Node.js** & **Express.js** â€“ Backend Framework
- **Sequelize** â€“ ORM for PostgreSQL
- **JWT (JSON Web Token)** â€“ Authentication
- **Bcrypt.js** â€“ Password Hashing
- **Nodemailer & Mailtrap** â€“ Email Notifications
- **ValidatorJs** â€“ Validation Credentials
- **AWS S3** â€“ File Storage
- **AWS SQS** â€“ Message Queue Service

---

## ğŸš€ How It Works

### 1ï¸âƒ£ **User Authentication & Referral**

- New users register and receive a unique **referral code**.
- If a user signs up using a referral code, both referrer and referred user get **50 coins**.

### 2ï¸âƒ£ **Daily Login Rewards**

- Users receive **10 coins** every day they log in.
- Logs are stored in the **Activity table**.

### 3ï¸âƒ£ **Profile Completion Rewards**

- Users completing 100% of their profile get **30 coins**.

### 4ï¸âƒ£ **Achievements System**

- Users unlock **Early Bird** if they log in for 3 consecutive days.
- Users unlock **Networker** if they refer 5 friends.
- Users unlock **Verified Profile** after completing 100% of their profile.

### 5ï¸âƒ£ **AWS S3 & SQS Integration**

- Users can upload files to **AWS S3**.
- Messages for events (e.g., notifications) are sent to **AWS SQS** for processing.